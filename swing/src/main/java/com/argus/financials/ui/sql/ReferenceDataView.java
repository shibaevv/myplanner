/*
 * ReferenceDataView.java
 *
 * Created on 19 May 2003, 15:12
 */

package com.argus.financials.ui.sql;

/**
 * 
 * @author valeri chibaev
 */

import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableModel;

import com.argus.financials.code.BaseCode;
import com.argus.financials.code.FinancialServiceCode;

public class ReferenceDataView extends javax.swing.JPanel {

    /** Creates new form ReferenceDataView */
    public ReferenceDataView() {
        initComponents();

        jComboBoxTable.addItem(new FinancialServiceCode());

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    private void initComponents() {// GEN-BEGIN:initComponents
        jPanelSelection = new javax.swing.JPanel();
        jLabelTable = new javax.swing.JLabel();
        jComboBoxTable = new javax.swing.JComboBox();
        jPanelDetails = new javax.swing.JPanel();
        jScrollPane = new javax.swing.JScrollPane();
        jTable = new javax.swing.JTable();
        jPanelControls = new javax.swing.JPanel();
        jButtonAdd = new javax.swing.JButton();
        jButtonDelete = new javax.swing.JButton();
        jButtonSave = new javax.swing.JButton();

        setLayout(new javax.swing.BoxLayout(this, javax.swing.BoxLayout.Y_AXIS));

        setPreferredSize(new java.awt.Dimension(600, 370));
        jPanelSelection.setLayout(new java.awt.FlowLayout(
                java.awt.FlowLayout.LEFT, 20, 5));

        jLabelTable.setText("Reference");
        jPanelSelection.add(jLabelTable);

        jComboBoxTable.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                jComboBoxTableItemStateChanged(evt);
            }
        });

        jPanelSelection.add(jComboBoxTable);

        add(jPanelSelection);

        jPanelDetails.setLayout(new javax.swing.BoxLayout(jPanelDetails,
                javax.swing.BoxLayout.X_AXIS));

        jTable.setModel(new javax.swing.table.DefaultTableModel(new Object[][] {

        }, new String[] {

        }));
        jScrollPane.setViewportView(jTable);

        jPanelDetails.add(jScrollPane);

        add(jPanelDetails);

        jPanelControls.setLayout(new java.awt.FlowLayout(
                java.awt.FlowLayout.CENTER, 10, 5));

        jButtonAdd.setToolTipText("Add Row");
        jButtonAdd.setText("Add");
        jButtonAdd.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonAddActionPerformed(evt);
            }
        });

        jPanelControls.add(jButtonAdd);

        jButtonDelete.setToolTipText("Delete Row");
        jButtonDelete.setText("Delete");
        jButtonDelete.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonDeleteActionPerformed(evt);
            }
        });

        jPanelControls.add(jButtonDelete);

        jButtonSave.setToolTipText("Save All Rows");
        jButtonSave.setText("Save");
        jButtonSave.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonSaveActionPerformed(evt);
            }
        });

        jPanelControls.add(jButtonSave);

        add(jPanelControls);

    }// GEN-END:initComponents

    private void jButtonDeleteActionPerformed(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_jButtonDeleteActionPerformed
        int row = jTable.getSelectedRow();
        if (row < 0)
            return;

        TableModel tm = jTable.getModel();
        if (!tm.isCellEditable(row, 0))
            return;

        if (tm instanceof DefaultTableModel) {
            DefaultTableModel dtm = (DefaultTableModel) tm;
            dtm.removeRow(row);
        }

    }// GEN-LAST:event_jButtonDeleteActionPerformed

    private void jButtonSaveActionPerformed(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_jButtonSaveActionPerformed
        try {
            BaseCode bc = (BaseCode) jComboBoxTable.getSelectedItem();
            bc.save();
            jTable.setModel(bc.asTableModel());
        } catch (com.argus.financials.service.ServiceException e) {
            e.printStackTrace(System.err);
        }

    }// GEN-LAST:event_jButtonSaveActionPerformed

    private void jButtonAddActionPerformed(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_jButtonAddActionPerformed
        TableModel tm = jTable.getModel();
        if (tm instanceof DefaultTableModel) {
            DefaultTableModel dtm = (DefaultTableModel) tm;
            dtm.addRow((java.util.Vector) null);
        }

    }// GEN-LAST:event_jButtonAddActionPerformed

    private void jComboBoxTableItemStateChanged(java.awt.event.ItemEvent evt) {// GEN-FIRST:event_jComboBoxTableItemStateChanged
        if (evt.getStateChange() != evt.SELECTED)
            return;

        BaseCode bc = (BaseCode) evt.getItem();
        jTable.setModel(bc.asTableModel());
    }// GEN-LAST:event_jComboBoxTableItemStateChanged

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel jPanelSelection;

    private javax.swing.JButton jButtonAdd;

    private javax.swing.JLabel jLabelTable;

    private javax.swing.JPanel jPanelControls;

    private javax.swing.JButton jButtonDelete;

    private javax.swing.JScrollPane jScrollPane;

    private javax.swing.JTable jTable;

    private javax.swing.JComboBox jComboBoxTable;

    private javax.swing.JPanel jPanelDetails;

    private javax.swing.JButton jButtonSave;
    // End of variables declaration//GEN-END:variables

}
